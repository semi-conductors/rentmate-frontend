<div class="flex-1 p-8 font-display text-white bg-background-dark min-h-screen">
  <div class="flex flex-col gap-6">

    <!-- Create Button -->
    <div class="flex justify-end">
      <button
        class="h-10 px-5 bg-[#FFC300] text-black font-bold rounded-lg hover:bg-[#FFD60A]/90"
        (click)="onCreateStuffAccountClick()"
      >
        Create Staff Account
      </button>
    </div>

    <!-- Search & Filters -->
    <div class="flex flex-col gap-4 p-4 rounded-lg bg-[#001D3D] overflow-visible relative z-10">
      <div class="flex items-center bg-[#00284D] rounded-lg">
        <span class="material-symbols-outlined text-gray-400 px-4">search</span>
        <input
          type="text"
          [value]="search()"
          (input)="onSearch($event.target.value)"
          placeholder="Search by Email, Name, Phone number..."
          class="flex-1 bg-[#00284D] text-white placeholder:text-gray-400 border-none outline-none px-2 py-3 rounded-r-lg"
        />
      </div>

    <!-- Filters Row -->
    <div class="flex gap-3 overflow-x-auto relative dropdown-container">
    
        <!-- ROLE FILTER -->
        <div class="relative">
            <button (click)="toggleDropdown('role')"
                class="flex h-8 items-center gap-2 px-3 rounded-lg bg-[#00284D] hover:bg-[#FFC300]/30">
                <span class="text-white text-sm font-medium">Role</span>
                <span class="material-symbols-outlined text-sm">expand_more</span>
            </button>
    
            @if (dropdownOpen() === 'role') {
            <div class="absolute z-20 mt-1 w-40 bg-[#001D3D] border border-[#003362] rounded-lg shadow-lg">
                @for (option of roleOptions; track option) {
                <button (click)="applyRoleFilter(option.value)"
                    class="block w-full text-left px-4 py-2 text-sm text-gray-200 hover:bg-[#00284D]">
                    {{ option.label || 'All Roles' }}
                </button>
                }
            </div>
            }
        </div>
    
        <!-- STATUS FILTER -->
        <div class="relative">
            <button (click)="toggleDropdown('status')"
                class="flex h-8 items-center gap-2 px-3 rounded-lg bg-[#00284D] hover:bg-[#FFC300]/30">
                <span class="text-white text-sm font-medium">Status</span>
                <span class="material-symbols-outlined text-sm">expand_more</span>
            </button>
    
            @if (dropdownOpen() === 'status') {
            <div class="absolute z-20 mt-1 w-56 bg-[#001D3D] border border-[#003362] rounded-lg shadow-lg">
                @for (option of statusOptions; track option) {
                <button (click)="applyStatusFilter(option.value)"
                    class="block w-full text-left px-4 py-2 text-sm text-gray-200 hover:bg-[#00284D]">
                    {{ option.label || 'All Statuses' }}
                </button>
                }
            </div>
            }
        </div>
    
        <!-- VERIFICATION FILTER -->
        <div class="relative">
            <button (click)="toggleDropdown('verified')"
                class="flex h-8 items-center gap-2 px-3 rounded-lg bg-[#00284D] hover:bg-[#FFC300]/30">
                <span class="text-white text-sm font-medium">Verification</span>
                <span class="material-symbols-outlined text-sm">expand_more</span>
            </button>
    
            @if (dropdownOpen() === 'verified') {
            <div class="absolute z-20 mt-1 w-44 bg-[#001D3D] border border-[#003362] rounded-lg shadow-lg">
                @for (option of verificationOptions; track option.label) {
                <button (click)="applyVerificationFilter(option.value)"
                    class="block w-full text-left px-4 py-2 text-sm text-gray-200 hover:bg-[#00284D]">
                    {{ option.label }}
                </button>
                }
            </div>
            }
        </div>
    
    </div>

    </div>

    <!-- Table -->
    <div class="overflow-x-auto rounded-lg border border-[#003362] bg-[#001D3D]">
      <table class="w-full text-left">
        <thead class="bg-[#00284D]">
          <tr>
            <th class="px-4 py-3">User ID</th>
            <th class="px-4 py-3">Email</th>
            <th class="px-4 py-3">Role</th>
            <th class="px-4 py-3">Status</th>
            <th class="px-4 py-3">Verified?</th>
            <th class="px-4 py-3">Action</th>
          </tr>
        </thead>

        <tbody>
          @if (loading()) {
            <tr>
              <td colspan="6" class="text-center py-6 text-gray-400">Loading...</td>
            </tr>
          } @else if (users().length === 0) {
            <tr>
              <td colspan="6" class="text-center py-6 text-gray-400">No users found</td>
            </tr>
          } @else {
            @for (user of users(); track user.id) {
              <tr class="border-t border-[#003362]">
                <td class="px-4 py-3 text-[#FFC300] cursor-pointer hover:underline">
                  #{{ user.id }}
                </td>
                <td class="px-4 py-3 text-gray-300">{{ user.email }}</td>
                <td class="px-4 py-3">
                  <span
                    class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"
                    [ngClass]="{
                      'bg-green-500/20 text-green-300': user.role === 'USER',
                      'bg-blue-500/20 text-blue-300': user.role === 'ADMIN',
                      'bg-orange-500/20 text-orange-300': user.role === 'DELIVERY_GUY',
                      'bg-purple-500/20 text-purple-300': user.role === 'MANAGER'
                    }"
                  >
                    {{ user.role }}
                  </span>
                </td>
                <td class="px-4 py-3">
                  <span
                    class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"
                    [ngClass]="{
                      'bg-green-500/20 text-green-300': user.accountActivity === 'ACTIVE',
                      'bg-red-500/20 text-red-300': user.accountActivity === 'INACTIVE',
                      'bg-blue-500/20 text-blue-300': user.accountActivity === 'PENDING_REPORT_REVIEW',
                      'bg-yellow-500/20 text-yellow-300': user.accountActivity === 'SUSPENDED_BY_ADMIN'
                    }"
                  >
                    {{ user.accountActivity }}
                  </span>
                </td>
                <td class="px-4 py-3 flex items-center gap-1"
                  [ngClass]="{
                    'text-green-400': user.isVerified,
                    'text-red-400': !user.isVerified
                  }">
                  <span class="material-symbols-outlined text-base">
                    {{ user.isVerified ? 'verified' : 'gpp_bad' }}
                  </span>
                  {{ user.isVerified ? 'Verified' : 'Not Verified' }}
                </td>
                <td class="px-4 py-3">
                  <button
                    (click)="manageUser(user)"
                    class="h-8 px-4 rounded-lg bg-[#FFC300] text-black text-sm font-medium hover:bg-[#FFD60A]/80"
                  >
                    Manage
                  </button>
                </td>
              </tr>
            }
          }
        </tbody>
      </table>
    </div>

    <!-- Pagination -->
    <div class="flex justify-between items-center mt-4">
      <button
        (click)="prevPage()"
        [disabled]="page() === 1"
        class="flex items-center gap-2 h-9 px-4 rounded-lg bg-[#001D3D] hover:bg-[#FFC300]/30 disabled:opacity-50"
      >
        <span class="material-symbols-outlined">arrow_back</span>
        Previous
      </button>

      <div class="text-gray-300 text-sm">
        Page {{ page() }} / {{ totalPages() }} â€” {{ totalItems() }} users
      </div>

      <button
        (click)="nextPage()"
        [disabled]="page() === totalPages()"
        class="flex items-center gap-2 h-9 px-4 rounded-lg bg-[#001D3D] hover:bg-[#FFC300]/30 disabled:opacity-50"
      >
        Next
        <span class="material-symbols-outlined">arrow_forward</span>
      </button>
    </div>
  </div>
</div>