<div class="flex-1 p-8 font-display text-white bg-[#000814] min-h-screen">
  <div class="flex flex-col gap-6">
    <!-- Header -->
    <div class="flex justify-between items-center">
      <h1 class="text-4xl font-black leading-tight tracking-tight">Reports Dashboard</h1>
    </div>
    
    @if (errorMessage()) {
      <div class="bg-[#7F1D1D] text-[#FCA5A5] p-4 rounded-lg text-center">
        {{ errorMessage() }}
      </div>
    }

    <!-- Search & Filters -->
    <div class="flex flex-col gap-4 p-4 rounded-lg bg-[#001D3D] overflow-visible relative z-10">
      <div class="flex flex-wrap gap-3 overflow-x-auto relative dropdown-container">
        <!-- STATUS FILTER -->
        <div class="relative">
          <button
            (click)="toggleDropdown('status')"
            class="flex h-8 items-center gap-2 px-3 rounded-lg bg-[#00284D] hover:bg-[#FFC300]/30"
          >
            <span class="text-white text-sm font-medium">Status</span>
            <span class="material-symbols-outlined text-sm">expand_more</span>
          </button>

          @if (dropdownOpen() === 'status') {
            <div class="absolute z-20 mt-1 w-40 bg-[#001D3D] border border-[#003362] rounded-lg shadow-lg">
              @for (option of statusOptions; track option.value) {
                <button
                  (click)="applyStatusFilter(option.value)"
                  class="block w-full text-left px-4 py-2 text-sm text-gray-200 hover:bg-[#00284D]"
                >
                  {{ option.label || 'All Statuses' }}
                </button>
              }
            </div>
          }
        </div>

        <!-- TYPE FILTER -->
        <div class="relative">
          <button
            (click)="toggleDropdown('type')"
            class="flex h-8 items-center gap-2 px-3 rounded-lg bg-[#00284D] hover:bg-[#FFC300]/30"
          >
            <span class="text-white text-sm font-medium">Type</span>
            <span class="material-symbols-outlined text-sm">expand_more</span>
          </button>

          @if (dropdownOpen() === 'type') {
            <div class="absolute z-20 mt-1 w-48 bg-[#001D3D] border border-[#003362] rounded-lg shadow-lg">
              @for (option of typeOptions; track option.value) {
                <button
                  (click)="applyTypeFilter(option.value)"
                  class="block w-full text-left px-4 py-2 text-sm text-gray-200 hover:bg-[#00284D]"
                >
                  {{ option.label || 'All Types' }}
                </button>
              }
            </div>
          }
        </div>
      </div>
    </div>

    <!-- Reports Table -->
    <div class="overflow-x-auto rounded-lg border border-[#003362] bg-[#001D3D]">
      <table class="w-full text-left">
        <thead class="bg-[#00284D]">
          <tr>
            <th class="px-4 py-3">ID</th>
            <th class="px-4 py-3">Type</th>
            <th class="px-4 py-3">Status</th>
            <th class="px-4 py-3">Reporter</th>
            <th class="px-4 py-3">Reported User</th>
            <th class="px-4 py-3">Submitted At</th>
            <th class="px-4 py-3">Actions</th>
          </tr>
        </thead>
        <tbody>
          @if (loading()) {
            <tr>
              <td colspan="7" class="text-center py-6 text-gray-400">Loading...</td>
            </tr>
          } @else if (reports().length === 0) {
            <tr>
              <td colspan="7" class="text-center py-6 text-gray-400">No reports found</td>
            </tr>
          } @else {
            @for (report of reports(); track report.id) {
              <tr class="border-t border-[#003362] hover:bg-[#00284D]/30 transition-colors">
                <td class="px-4 py-3 text-[#FFC300] font-medium">#{{ report.id }}</td>
                <td class="px-4 py-3 text-gray-300">{{ report.reportType }}</td>
                <td class="px-4 py-3">
                  <span
                    class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"
                    [ngClass]="{
                      'bg-yellow-500/20 text-yellow-300': report.status === 'PENDING',
                      'bg-blue-500/20 text-blue-300': report.status === 'UNDER_REVIEW',
                      'bg-green-500/20 text-green-300': report.status === 'RESOLVED',
                      'bg-red-500/20 text-red-300': report.status === 'DISMISSED'
                    }"
                  >
                    {{ report.status }}
                  </span>
                </td>
                <td class="px-4 py-3 text-gray-300">{{ report.reporterName }}</td>
                <td class="px-4 py-3 text-gray-300">{{ report.reportedUserName }}</td>
                <td class="px-4 py-3 text-gray-300">
                  {{ report.submittedAt | date: 'short' }}
                </td>
                <td class="px-4 py-3">
                <button
                  (click)="viewReport(report.id)"
                  [disabled]="claiming() === report.id"
                  class="h-8 px-4 rounded-lg bg-[#FFC300] text-black text-sm font-medium hover:bg-[#FFD60A]/80 disabled:opacity-50"
                >
                  @if (claiming() === report.id) {
                    <span class="animate-spin material-symbols-outlined text-base">progress_activity</span>
                  } @else {
                    Review
                  }
                </button>
                </td>
              </tr>
            }
          }
        </tbody>
      </table>
    </div>

    <!-- Pagination -->
    <div class="flex justify-between items-center mt-4">
      <button
        (click)="prevPage()"
        [disabled]="page() === 1"
        class="flex items-center gap-2 h-9 px-4 rounded-lg bg-[#001D3D] hover:bg-[#FFC300]/30 disabled:opacity-50"
      >
        <span class="material-symbols-outlined">arrow_back</span>
        Previous
      </button>

      <div class="text-gray-300 text-sm">
        Page {{ page() }} / {{ totalPages() }} â€” {{ totalItems() }} reports
      </div>

      <button
        (click)="nextPage()"
        [disabled]="page() === totalPages()"
        class="flex items-center gap-2 h-9 px-4 rounded-lg bg-[#001D3D] hover:bg-[#FFC300]/30 disabled:opacity-50"
      >
        Next
        <span class="material-symbols-outlined">arrow_forward</span>
      </button>
    </div>
  </div>
</div>