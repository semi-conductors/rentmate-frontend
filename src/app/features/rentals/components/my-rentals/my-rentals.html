<div class="container">
  <!-- Header -->
  <div class="header">
    <div class="logo">Rent<span>Mate</span></div>
    <h1 class="page-title">ğŸ“¦ All My Rentals</h1>
    <p class="page-subtitle">View and manage all your rental history</p>
  </div>

  <!-- Stats Bar -->
  <div class="stats-bar">
    <div class="stat-card">
      <div class="label">Total Rentals</div>
      <div class="value">{{ totalRentals() }}</div>
    </div>
    <div class="stat-card">
      <div class="label">Pending</div>
      <div class="value pending">{{ pendingCount() }}</div>
    </div>
    <div class="stat-card">
      <div class="label">Approved</div>
      <div class="value approved">{{ approvedCount() }}</div>
    </div>
    <div class="stat-card">
      <div class="label">Rejected</div>
      <div class="value rejected">{{ rejectedCount() }}</div>
    </div>
  </div>

  <!-- Loading State -->
  <ng-container *ngIf="isLoading()">
    <div class="loading-state">
      <div class="spinner">â³</div>
      <p>Loading your rentals...</p>
    </div>
  </ng-container>

  <!-- Empty State -->
  <ng-container *ngIf="!isLoading() && rentals().length === 0">
    <div class="empty-state">
      <div class="icon">ğŸ“­</div>
      <h3>No Rentals Yet</h3>
      <p>You don't have any rental requests.</p>
      <button class="btn-browse" routerLink="/browse-items">Browse Available Items</button>
    </div>
  </ng-container>

  <!-- Rentals Grid -->
  <ng-container *ngIf="!isLoading() && rentals().length > 0">
    <div class="rentals-grid">
      <div *ngFor="let rental of rentals()" class="rental-card" [class.has-payment]="rental.status === 'Approved'" (click)="viewDetails(rental.rentalId)">
        <div class="rental-icon">{{ rental.itemIcon || 'ğŸ“¦' }}</div>

        <div class="rental-info">
          <div class="item-name">{{ rental.itemName || 'Loading...' }}</div>
          <div class="dates">ğŸ“… {{ formatDate(rental.startDate) }} â†’ {{ formatDate(rental.endDate) }} ({{ rental.rentalDays }} days)</div>
        </div>

        <div class="rental-status" [style.background-color]="getStatusColor(rental.status) + '20'"
             [style.border-color]="getStatusColor(rental.status)"
             [style.color]="getStatusColor(rental.status)">
          <ng-container [ngSwitch]="rental.status">
            <span *ngSwitchCase="'Pending'">â³ Pending</span>
            <span *ngSwitchCase="'Approved'">âœ… Approved</span>
            <span *ngSwitchCase="'Rejected'">âŒ Rejected</span>
            <span *ngSwitchCase="'Completed'">ğŸ‰ Completed</span>
          </ng-container>
        </div>

        <ng-container *ngIf="rental.status === 'Approved'">
          <div class="rental-price">
            <div class="amount">${{ rental.totalPrice.toFixed(2) }}</div>
            <div class="label">Total</div>
          </div>
          <button class="btn-pay" (click)="goToPayment(rental.rentalId, $event)">ğŸ’³ Pay Now</button>
        </ng-container>
      </div>
    </div>

    <!-- Pagination -->
    <div class="pagination">
      <button (click)="previousPage()" [disabled]="currentPage() === 0">â† Previous</button>
      <span class="page-info">Page <strong>{{ currentPage() + 1 }}</strong> of <strong>{{ totalPages() }}</strong></span>
      <button (click)="nextPage()" [disabled]="currentPage() >= totalPages() - 1">Next â†’</button>
    </div>
  </ng-container>
</div>
