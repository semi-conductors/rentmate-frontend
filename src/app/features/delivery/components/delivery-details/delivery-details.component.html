<div class="delivery-details-container">
  <header class="header">
    <button class="back-btn" (click)="goBack()">←</button>
    <div class="header-content">
      <h1 class="title">Delivery Details</h1>
      @if (delivery()) {
        <p class="subtitle">#ORD-{{ displayId() }}</p>
      }
    </div>
  </header>

  @if (loading()) {
    <div class="loading-container">
      <div class="spinner"></div>
      <p>Loading...</p>
    </div>
  }

  @if (error() && !loading()) {
    <div class="error-container">
      <p class="error-text">{{ error() }}</p>
      <button class="retry-btn" (click)="loadDeliveryDetails()">Retry</button>
    </div>
  }

  @if (delivery(); as deliveryData) {
    <div class="content">
      <div class="info-card">
        <div class="card-header">
          <div class="icon-container">👤</div>
          <div>
            <h3 class="card-title">Delivery Information</h3>
            <p class="card-subtitle">
              {{ deliveryData.type === 'FORWARD' ? 'Forward Delivery' : 'Return Delivery' }}
            </p>
          </div>
        </div>

        <div class="info-section">
          <div class="info-row">
            <span class="icon">📍</span>
            <div class="info-content">
              <p class="label">From</p>
              <p class="value">{{ deliveryData.pickupName }}</p>
              <p class="sub-value">{{ deliveryData.pickupAddress }}</p>
              <p class="sub-value">📞 {{ deliveryData.pickupPhone }}</p>
            </div>
          </div>

          <div class="divider"></div>

          <div class="info-row">
            <span class="icon">📍</span>
            <div class="info-content">
              <p class="label">To</p>
              <p class="value">{{ deliveryData.dropoffName }}</p>
              <p class="sub-value">{{ deliveryData.dropoffAddress }}</p>
              <p class="sub-value">📞 {{ deliveryData.dropoffPhone }}</p>
            </div>
          </div>
        </div>
      </div>

      <div class="info-card">
        <h3 class="card-title">Order Details</h3>

        <div class="info-section">
          <div class="detail-row">
            <span class="detail-label">Status</span>
            <span class="status-badge" [class.completed]="isCompleted()">
              {{ deliveryData.status }}
            </span>
          </div>

          <div class="detail-row">
            <span class="detail-label">Delivery Guy</span>
            <span class="detail-value">{{ deliveryData.deliveryGuyName }}</span>
          </div>


          <div class="detail-row">
            <span class="detail-label">Deadline Date</span>
            <span class="detail-value">{{ formatDate(deliveryData.createdDate) }}</span>
          </div>
        </div>
      </div>

      @if (!isCompleted()) {
        <button class="complete-btn" (click)="onComplete()">
          <span class="btn-icon">✓</span>
          <span class="btn-text">Complete Delivery</span>
        </button>
      }

      @if (isCompleted()) {
        <div class="completed-message">
          <span class="check-icon">✓</span>
          <span>Delivery completed successfully</span>
        </div>
      }
    </div>
  }
</div>
